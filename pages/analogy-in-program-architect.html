<!doctype html>
<html lang="ru">
<head>
    <meta charset='utf-8'>
    <meta name="yandex-verification" content="7021eeb9c07b5c09">
    <meta name="google-site-verification" content="PztbVe6Ru8ggM2n_tWUYwy0bEVHtJNvzIr-nsVCvBCA">
    
    
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <!-- favicons -->
    <link rel="shortcut icon" type="image/x-icon" href="/assets/stab/img/favicons/favicon.ico">
    <link rel="icon" type="image/png" href="/assets/stab/img/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/assets/stab/img/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="mask-icon" href="/assets/stab/img/favicons/safari-pinned-tab.svg" color="#004245">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/stab/img/favicons/apple-touch-icon.png">
    <meta name="msapplication-config" content="/assets/stab/img/favicons/browserconfig.xml">
    <!-- end favicons -->
    <!-- rss feeds -->
    <link rel=alternate title="RSS лента" type=application/rss+xml href='/rss-all.xml'>
    <!-- end rss feeds -->
    <link type="text/plain" rel="author" href="/humans.txt">
    <link crossorigin='anonymous' href='https://cdn.materialdesignicons.com/3.5.95/css/materialdesignicons.min.css'
          integrity='sha384-Ls5zBitvvQ/wdeZDuTUevSY5Tb/she50BeMPrco2ok6xDC8modj6/JPwdL0gNxmP' rel='stylesheet'>
    
    <link crossorigin='anonymous' integrity='sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ=='
          href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    
    <link href="/assets/dev/css/main.css" rel='stylesheet'>
    
    <title>Метод аналогии в архитектуре программ. Космическая станция Аналитики - DIY техноблог о сложных IT-проектах</title>
    <meta name="description" content="Анализ применимости биологической аналогии для исследования архитектуры">
    <meta content='Метод аналогии в архитектуре программ. Космическая станция Аналитики - DIY техноблог о сложных IT-проектах' property='og:title'>
    
    <meta name="keywords" content="архитектура,ооп,эволюция,биология,требования">
    
    <meta content='/index.html' property='og:url'>
    <meta content='website' property='og:type'>
    <meta content='ru_RU' property='og:locale'>
</head>
<body>
<div class='container mb-3'>
    <div class='row'>
        <div class='col-lg-12'>
           <div class='card w-100 site-header-container'>
    <div class='row align-items-center'>
        <div class="col-lg-9">
            <div class='card-header site-header'>
                <div class='card-title site-header-title mb-3'>
                    <h5 class='site-header-title-text'>
                        <a href='/index.html' class='blog-title-text-link'>Космическая станция Аналитики - DIY техноблог о сложных IT-проектах</
                    </h5>
                </div>
                <div class='card-subtitle site-header-subtitle mb-2'>
                     <a href="/pages/about.html" class="badge mb-2 mb-sm-0">О станции и капитане</a>  <a href="/pages/site-implementation.html" class="badge">Сайт (Groovy-генератор)</a> 
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            
            <div class='site-map w-100 d-flex justify-content-center pe-lg-3'>
                <a class='site-map-link btn w-100' href='/site-map.html' role='button'><span
                        class='site-map-link-icon mdi mdi-sitemap'></span>
                    <span class='text-clarification'>Карта сайта (все статьи)</span></a>
            </div>
            
        </div>
    </div>
</div>
        </div>
    </div>
</div>
<div class='container'>
    <div class='row'>
        <div class='col-lg-9 blog-posts'>
            <article class='card post'>
    <h5 class='card-header post-header fw-bold'>
        Метод аналогии в архитектуре программ
    </h5>
    <div class='card-body post-body'>
        <div class="card-title mb-3">
            <div class="post-body-header">

<div class='post-header-date'><span class='mdi mdi-calendar-clock'></span>
    <span class="post-datetime-text" data-iso-time="2020-04-06">6 апреля 2020</span>
</div>



<div class='post-labels'>
    <span class='post-header-labels-icon mdi mdi-tag-outline'></span>
    
    <a class='post-label-item badge font-weight-normal'
       href='/tags/metodologija.html' rel='tag'>Методология
    </a>
    
    <a class='post-label-item badge font-weight-normal'
       href='/tags/arhitektura_po.html' rel='tag'>Архитектура ПО
    </a>
    
</div>
</div>
        </div>
        <div class='post-content'><p>Многие архитектурные проблемы кроются в специализации принципов, которые при грубом применении в нарушение заветов системного анализа могут оставлять за кадром надсистему, либо же саму систему вообще.</p>
<p>Так, принцип единственной ответственности концентрируется на внутренней структуре и не поднимает проблемы надсистемы - резкий скачок количества в ней модулей за счёт разделения ответственности между ними.</p>
<p>Уменьшение числа зависимостей акцентирует на взаимодействии в надсистеме, оставляя за кадром вопросы внутренней структуры самого класса, который может легко стать ограниченным в функционале и не справиться даже с самыми примитивными задачами, а равно как и стать слишком раздутым.</p>
<p>Эти проблемы подчиняются диалектическому принципу борьбы противоположностей - любое принятое решение сводится к вынужденному компромиссу и необходимости пожертвовать чем-то другим:</p>
<ul>
<li>Инжекция зависимостей в конструктор упрощает замену объектов и тестирование, но при увеличении количества таких зависимостей потребует переделки конструктора, сложной сборки или сеттеров.</li>
<li>Контейнер зависимостей упрощает сборку и управление объектами, но осложняет понимание логики работы и реализации, создает точку отказа и при наивном подходе к описанию постоянно растущих масштабов конфигурации способен сильно осложнить даже самые простые переделки.</li>
<li>Иммутабельность упрощает многопоточность, производительность или безопасность, но ухудшает адаптацию объекта к требованиям, что вполне способно убить приложение, если в сквозной логике или в критичном участке на поздних этапах внезапно потребуется изменяемый объект и его никак нельзя пересобрать, например, в случае middleware.</li>
</ul>
<p>Любое решение может обладать тем или иным недостатком, проявляя его в зависимости от условий или точек рассмотрения.</p>
<p>Само по себе приложение бесполезно и должно соответствовать каким-либо требованиям: FURPS или похожим. Каждое требование связано также с надсистемами - компанией, ведущей разработку или глобальными надсистемами - экономикой, юриспруденцией и т.п., а также с инфраструктурой языков программирования, особенностей их коммьюнити и т.п. вплоть до ограничений способностей разработчика (например, известный <a href="https://ru.wikipedia.org/wiki/Магическое_число_семь_плюс-минус_два">кошелёк Миллера</a>). На вид простые требования быстро усложняются до огромного графа взаимосвязей, создавая проблемы и противоречия.</p>
<p>Решение таких компромиссов требует сложных подходов и скорее сводится к задачам моделирования, что потребовало бы сложной математической модели даже для самых простых задач. Современные немногочисленные IDE не обладают подобным функционалом, а часть софта вполне обходится без какой-либо архитектуры вообще, будучи популярной и хорошо продаваясь за счет связи программирования с экономический системой и агрессивного маркетинга. Многие термины полны неоднозначностей и сложностей трактовки, что при переводе с другого языка еще более все усугубляют и способны создавать путаницу даже по звучанию (связность, связанность, зацепление и т.п.).</p>
<p>Постоянное изменение кода и адаптация его к требованиям имеет определенное сходство с эволюцией - процесса структурного изменения от одного состояния к другому. При этом может произойти и деградация, например, если попытаться очень-очень сильно расслоить код в статическом языке, то огромное количество параметризаций разбросается по всему приложению. На определенном этапе вполне есть шанс получить несовместимую их комбинацию и окончательно во всём запутаться. Несмотря на высокую гибкость и универсальность - это всё же деградация, такой код чрезвычайно сложно поддерживать.</p>
<p>Хотелось бы проанализировать, насколько аналогия с биологическими системами полезна для построения архитектуры программ. Основное преимущество биологической модели в том, что она интуитивна и частично наблюдаема с рождения, хотя бы с ростом специфичности задачи её польза (хотя, вероятно, польза любой аналогии) сильно уменьшается.</p>
<p>Если для анализа классов и взаимоотношений можно пытаться использовать формальную логику, то на уровне внутренних кишок приложения её польза сильно теряется. Например, проблемен инфраструктурный уровень, для которого трудно подобрать реальные аналогии: окно в десктопном приложении можно рассматривать как отображение, как поведение или как их сочетание. На ранних этапах такой мучительный анализ будет тратить огромное количество времени, не давая ничего взамен - требования быстро меняются и код может их не пережить. Это редуцирует отбор классов до &quot;работает&quot; и &quot;плохо работает&quot;. Часть этих проблем пытается решить идеология Domain-driven design, но её полезность сильно снижается из-за частого отсутствия техзадания, специалистов предметных областей и четко очерченных методологий.</p>
<p>Сам по себе метод аналогии тоже не очень прост и подразделяется в зависимости от целей анализа по количеству - аналогия предметов, классов, подмножеств, а также по качеству - аналогия свойств и аналогия отношений.</p>
<p>Аналогия свойств рассматривает элементы и их признаки, если обозначить признак по которому сравниваются элементы как P, то в случае двух элементов <strong>a</strong> и <strong>b</strong> её формула очень проста:<br/>P1, P2, P3 (a) - элемент <strong>a</strong> обладает свойствами P1, P2, P3<br/>P1, P2 (b) - элемент <strong>b</strong> обладает свойствами P1 и P2<br/>----------------------<br/>◊(P3 (b)) - вероятно (символ ◊ - оператор возможности), элемент <strong>b</strong> обладает и свойством P3</p>
<p>Аналогия отношений рассматривает отношения между элементами:<br/>a R b - <strong>a</strong> находится к <strong>b</strong> в отношении <strong>R</strong><br/>c R d - <strong>с</strong> находится к <strong>d</strong> в отношении <strong>R</strong><br/>R ≡ R и отношения сходны, то<br/>----------------------<br/>◊(a R b)≡(c R d) - вероятно, и отношения <strong>а</strong> к <strong>b</strong> и <strong>с</strong> к <strong>d</strong> аналогичны. Сказать что-то об отношении элементов друг к другу можно в случае уже одного из видов аналогии отношений - аналогии простого отношения. Например, в случае аналогии простого отношения:<br/>a R b<br/>b R c<br/>----------------------<br/>◊(a R c)<br/>Или же ◊((a R b) ∧ (b R c)→(a R c)), если заменить R, например, на &quot;больше&quot; или &quot;меньше&quot;, то это похоже на транзитивность: если <strong>a</strong> больше <strong>b</strong>, а <strong>b</strong> больше <strong>c</strong>, то <strong>a</strong> больше <strong>c</strong>. Однако отличие в вероятностном выводе, хотя в случае аналогии простого отношения связь также не должна меняться. Если она изменяется, то в игру вступает уже аналогия степеней отношения.</p>
<p>Еще одна аналогия условной зависимости пытается выявить причину:<br/>p→q - если <strong>p</strong> является причиной <strong>q</strong><br/>p≡r - а <strong>p</strong> аналогичен <strong>r</strong><br/>q≡s - и <strong>q</strong> аналогичен <strong>s</strong>, значит<br/>----------------------<br/>◊(r→s) - вероятно, что <strong>r</strong> причина для <strong>s</strong>.</p>
<p>Беспощадный формализм, но я все же должен был это упомянуть для полноты статьи. На практике с аналогией есть определенные проблемы, потому как она, как и любой метод, имеет и свои требования:</p>
<ul>
<li>Количество сходных признаков должно быть как можно больше.</li>
<li>Признаки должны быть разнообразными.</li>
<li>Признаки должны являться существенными для сравниваемых предметов.</li>
<li>Между сходными признаками и переносимым признаком должна присутствовать <strong>закономерная</strong> связь.</li>
</ul>
<p>Как видно, соблюсти эти требования достаточно трудно, особенно последний: все же аналогия часто применяется к признакам плохо определенным или малоизученным, выявление закономерности для которых проблематично. Поэтому можно считать, что аналогия в статье будет нестрогой, а некоторые выводы - ошибочны. Основная цель такой аналогии - натолкнуть на интересную мысль и рассмотреть некоторые вопросы с иной точки зрения.</p>
<p>Во-первых, нужно попытаться выстроить аналогию между биологической системой и приложением. Структура от наименьшего элемента в биологической системе: клетка-&gt;ткань-&gt;орган-&gt;система органов-&gt;организм-&gt;популяция-&gt;экосистема. Отобразить подобную структуру можно по-разному, но тут есть определенные сложности.</p>
<p>Основная проблема - отсутствие однозначных понятий, которые создают ясную иерархию включения друг в друга и разделения структурного и функционального строения. Можно часто встретить разделение приложения на слои: слой доступа к данным, бизнес-слой, сервисы для внешних систем, слой представления для людей, ну и сквозная функциональность. Но такое деление достаточно условно, плохо раскрывает структуру и на практике границы смываются, например, вспомним о проблемных SQL-запросах, которые могут иметь сложную бизнес-логику, как и простой запрос на выборку.</p>
<p>Если принять наименьшей единицей класс, то на переносимый признак напрашивается объединение классов и в структурном контексте можно использовать ассоциацию. С другой стороны, класс может одновременно участвовать и в зависимости: если метод принимает рандомный объект и вызывает уже его метод, то нельзя сказать, что он состоит из этого объекта или включает его в себя. Но такой же эффект наблюдается и в живой системе, по аналогии с сильной зависимостью от сквозной кровеносной и нервной системы можно остановиться на ассоциации, но отношением сложно передать строение. Можно вспомнить о классе-ассоциации, который определяется наличием атрибутов и операций, так и ссылок на объекты. На первый взгляд - это хороший кандидат, но в UML для класса-ассоциации имеет значение индивидуальность связи, что зависит от индивидуальности объектов. Это сильно понижает полезность такого термина, завязывая его на особенности моделирования.</p>
<p>Если принять, что между классами нужно наладить взаимодействие в виде объектов, то на эту роль напрашивается поведенческий паттерн - медиатор. В случае композиции и прямого создания объекта он должен быть информационным экспертом в терминах GRASP. Но может иметь место случай, когда класс просто содержит объекты без какого-либо взаимодействия между ними. Таким образом, есть проблема между взаимодействием объектов и их структурой. Собственных атрибутов и операций нет, он выступает как агрегат, не делая ничего другого. Но такой термин опять вступает в конфликт с UML, где агрегация еще и предполагает независимое существование объектов, что для моделируемого класса может быть нехарактерным, путаясь с композицией, да и еще путаясь с агрегатами в DDD. Но вместе с агрегацией иногда вспоминается и делегирование и даже при публичном свойстве объект-хозяин всегда может контролировать доступ за счет многочисленных хаков. Делегат тоже можно рассмотреть как частный случай такой &quot;агрегации&quot; - если в объекте отсутствует метод, то он ищется в делегате, но при этом между делегатами не осуществляется особого взаимодействия.</p>
<p>Медиатор и взаимодействие объектов организуются обычно в пакет, но т.к. пакет все же привязан к особенностям языка, а в UML управляет сложностью самой UML-модели, то можно попробовать перейти к диаграмме компонентов, использовав термин компонент с предоставляемыми и требуемыми интерфейсами. С другой стороны, такой переход заменяет структурное деление на условное - по сходному функционалу, никто же не запрещает нашпиговать класс самыми разными объектами. Аналогом также может быть и паттерн фасад - который использует делегирование, но уже к медиаторам сходной области.</p>
<p>На более высоком уровне фасады должны взаимодействовать друг с другом и за счет их различий здесь может быть удобным контроллер. Получается следующая цепочка класс-&gt;делегат-&gt;медиатор-&gt;фасад-&gt;контроллер. Очевидно, что она избыточна, например, делегата или фасада может и не быть, с другой стороны, без взаимодействия объектов друг с другом и объектов разного функционала приложение не сможет выполнять свои задачи. Можно редуцировать её в минимальную: класс-&gt;медиатор-&gt;контроллер. Она же работает и для объекта. Здесь есть одна проблемка.... как оно сочетается, например с наблюдателем, который можно рассмотреть как частный случай управления взаимодействием объектов или как что-то большее, да и не решен вопрос между структурой и взаимодействием объектов друг с другом. Можно пойти по пути еще большего упрощения, сведя всё к классу-контроллеру или даже к одному контроллеру, поскольку в объектно-ориентированных языках для получения полезного эффекта даже в простейшем хелловордном случае вывод текста все равно будет сопровождаться управлением объектом, который скорее всего будет осуществлять взаимодействия уже между другими объектами.</p>
<p>На этой наивной и противоречивой модели можно сделать несколько допущений по аналогии с анализом популяции. Возьмем универсальные категории количества и качества:</p>
<ul>
<li>Увеличение мелких классов - управление большим количеством классов потребует либо большего количества медиаторов, либо прямого переноса взаимодействия в контроллер. Последнее очень распространено для пилотной архитектуры, когда классы фреймворка или бизнес-логики прямо используются в контролирующих классах, при появлении дублирования заменяются службами\сервисами или чем-то подобным. Создавать промежуточное звено трудно из-за ограничений времени.</li>
<li>Увеличение медиаторов может быть из-за увеличения классов, сложной предметной области, большого количества решаемых задач или особенностей рефакторинга. Управление такой оравой потребует усложнения и укрупнения контроллеров, либо увеличения их количества.</li>
<li>Наконец, увеличение количества контроллеров потребует организации их взаимодействия: древовидная иерархия, шина сообщений и т.п.</li>
</ul>
<p>Принцип перехода количества в качество опять намекает, что для некоторых задач уменьшить количество можно за счет нарушения ответственностей и укрупнения классов.</p>
<p>Поисследуем вообще применимость свойств биологической системы к условной:</p>
<ul>
<li>Воспроизводимость - в контексте объекта через инстанцирование, прототип, фабрики.</li>
<li>Саморегуляция - через управление с обратной связью на основе каких-то данных, паттерны Tester-Doer\Try-Parse.</li>
<li>Устойчивость - через управление исключительными ситуациями, защиты от изменений через Protected Variations в терминах GRASP.</li>
<li>Изменчивость - возможность реализации задачи различными способами. В контексте класса - наследование для специализации. Адаптер и декоратор.</li>
<li>Наследственность - в контексте приложений использование устоявшихся паттернов и приемов, в контексте класса также наследование, определение абстрактных контрактов.</li>
<li>Раздражимость - обработка прерываний или событий, паттерн наблюдатель.</li>
<li>Обмен веществ - обмен сообщениями с системой и между объектами.</li>
<li>и т.п.</li>
</ul>
<p>Складывается ложное впечатление изоморфности систем, но это, конечно же не так. Аналогия очень груба и содержит множество ошибок. Наибольшая проблема - тесная связь приложения с оператором, живая система явно более автономна и содержит более высокий уровень саморегуляции.</p>
<p>Аналогия с зависимостью от кровеносной и нервной системы стыкуется с известными рисками в архитектуре: в случае изменений сквозной логики, а равно как и любого родительского класса с большой иерархией наследования будут масштабные переделки, нарушение функционала и баги. В этом случае переносимым признаком может быть множество точек взаимодействия.</p>
<p>Биологическая аналогия также применима для описания риска точки отказа - контролирующие узлы нервной, кровеносной системы и т.п. или наличия управления через обратную связь. Последняя не слишком характерна для простого приложения, но может быть связана с управлением исключениями. Известно, что исключения не рекомендуется использовать для управления потоками, но и постоянный проброс их наверх делает приложение очень хрупким и неюзабельным, это все равно, что при малейшем нарушении в каком-либо органе человек сразу бы умирал. Можно сделать допущение, что перехват и логирование исключений связано с анализом его критичности и принятием решения, хотя бы это и очень условно. Здесь можно также вспомнить и о событийной архитектуре или о наблюдателе.</p>
<p>Интересной может быть аналогия статических и динамических показателей популяции. Статические - численность, плотность, структурные - возрастной, половой, размерный (разные размеры особей). Динамические показатели определяются уже относительно каких-либо промежутков времени: рождаемость, смертность, скорость роста.</p>
<p>Обычно IDE также имеют инструменты для анализа связей классами друг с другом, количеств классов в пакете, поиск самых больших классов и т.п. А вот динамические показатели скорее связаны с рефакторингом, в известной книге М. Фаулера можно уловить аналогии:</p>
<ul>
<li>Рождение класса: большой класс, длинный список параметров, расходящиеся модификации через выделение класса, введение граничного объекта и т.п.</li>
<li>Смерть класса - &quot;ленивый класс&quot;, теоретическая общность через сворачивание иерархии.</li>
</ul>
<p>Однако это все относится к написанию кода, когда в присутствии сборщика мусора рождение и смерть объектов можно рассмотреть еще и как этапы их жизненного цикла. В этом случае интерес представляет способ их конструирования, устройство конструкторов или наличие фабричных методов. Что фабрики или фабричный метод, что конструкторы, что клонирование - все они проблемны и очень болезненно реагируют на меняющиеся требования, особенно в сочетании с инжекцией зависимостей. Если сборка становится сложной, то очевидна тенденция уменьшить количество таких объектов, либо чем-то пожертвовать другим.</p>
<p>На скорость роста классов может влиять фреймворк, используемые архитектурные принципы или другие особенности. Количество разработчиков, которые сопровождают проект будут определять границы сложности приложения. В случае очень большого количества классов даже без взаимодействий в случае плохой IDE поддерживание кода может стать задачей нетривиальной.</p>
<p>Сильное влияние оказывает скорость разработки, уменьшая количество времени на анализ архитектуры, в случае пилотного проекта классы, как правило, могут быть монструозными за счет попытки быстро получить прототип и узнать проблемы библиотек. Если учесть, что библиотеки, инструменты имеют многочисленные недостатки, которые усугубляются менеджментом, то для некоторого числа ситуаций соблюдение архитектурных принципов выглядит невозможным из-за цепочек косвенных взаимосвязей.</p>
<p>На более высоком уровне взаимодействия с окружающей средой может быть интересна аналогия с экологическими факторами — компонентами окружающей среды, влияющие на живой организм, при этом в ответ на изменение он реагирует приспособительными реакциями или адаптациями. Для класса можно уловить аналогию с требованиями FURPS.</p>
<p>При этом экология вводит дополнительное деление, которое обычно не рассматривается в требованиях:</p>
<ul>
<li>Факторы со строгой периодичностью - требования известны и архитектура высоко адаптирована для них.</li>
<li>Без строгой периодичности, повторяющиеся время от времени. Вероятно, высокие нагрузки: несмотря на тяжелую жизнь приложения, зависания и работу на границе возможностей - оно все же работает и выполняет свою задачу.</li>
<li>Без строгой периодичности и неопределенно – например, действия пользователя и неочевидная логика его работы. Несмотря на сценарии использования все равно найдется такая комбинация, которая положит приложение.</li>
<li>Факторы направленного действия, которые действуют постепенно и относительно долго. Приложение изменяется под изменение аудитории, требований и т.п. и эти изменения не нарушают функционала за счет наличия времени на разработку и тестирования.</li>
</ul>
<p>Аналогия вполне стыкуется с реальностью: если требование сильно изменяет функционал или требует масштабных изменений, то его введение приведет к багам, проблемам или вообще смерти - приложение не сможет адаптироваться и погибнет, как и любой живой организм, что находит аналогию с т.н. точкой бифуркации живой системы, когда фактор выходит за пределы порога терпимости. С изменением тесно связана адаптация, которая, в свою очередь, связана с конкурентной борьбой, где можно задеть и экономическую систему.</p>
<p>Адаптация - приспособление строения и функций к условиям внешней среды и грубо можно предположить, что бизнес-успех приложения будет связан с ней, хотя и не всегда. Но изменение функций требует изменения строения, что в условиях, например, test-driven-development может приводить к известным сюрпризам с переделкой всего и вся.</p>
<p>Если вспомнить структуру выше, то адаптация может затрагивать все уровни, начиная от контроллеров и заканчивая самыми простыми классами:</p>
<ul>
<li>Изменение строения классов изменяет медиаторы, а следом и контроллеры.</li>
<li>Изменение медиаторов изменяет контроллеры.</li>
<li>Изменение контроллеров изменяет поведение приложения.</li>
</ul>
<p>Здесь стоит вспомнить инкапсуляцию - ограничение доступа одних компонентов к другим. Если попытаться использовать инкапсуляцию в более широком смысле, то т.к. все последующие уровни строятся на взаимодействии объектов друг с другом, то сомнительна такая инкапсуляция, которая способна защитить от изменений. Например, метод возвращает простую строку и логика его работы скрыта. При изменении алгоритма контракт метода не изменился, однако сам класс изменился. Нельзя сказать, что изменения не повлияют на все уровни выше, поскольку кроме самой строки есть еще исключительные ситуации, влияние на производительность, зависимость от состояния объекта, количество вызовов метода и т.п.</p>
<p>Адаптационные механизмы уже будут тесно связаны с особенностями языка, фреймворка или устоявшихся практик и биологическая аналогия становится менее полезной. Так сервис-менеджер или контейнер-зависимостей позволяет достаточно легко заменять компоненты, для этой же цели можно использовать паттерны стратегия, команда, собственно полиморфизм и т.п.</p>
<p>Однако в контексте адаптации уже человека интересна аналогия двух типов:</p>
<ul>
<li>Аллопластическая - изменение окружения.</li>
<li>Аутопластическая- изменение структуры под окружение.</li>
</ul>
<p>Есть небольшая проблема в том, что эти термины психологические, а значит в биологическую структуру вводят еще и психику. Но в любом случае, это можно принять на вооружение - необязательно изменять структуру программы под требование, возможно изменить само требование. Этим скорее руководствуются некоторые продукты, маскируя минимализм дизайна под заботу о снижении когнитивного шума, упрощение понимания программы и т.п.</p>
<p>К связи адаптации с требованиями можно вспомнить об экологических законах, наиболее интересным из которых выглядит закон лимитирующего фактора, он же закон Либиха, он же известная &quot;бочка Либиха&quot; - наиболее значим для организма тот фактор, который более всего отклоняется от оптимального его значения. Этот принцип был дополнен законом толерантности Шелфорда - существование вида определяется лимитирующими факторами, находящимися не только в минимуме, но и в максимуме. И находится в определенном &quot;конфликте&quot; с законом Митчерлиха, в котором результат зависит от совокупного действия всех факторов.</p>
<p>Если рассмотреть отклонение фактора как отклонение требования, то сбор требований становится наиболее важным этапом. В различных ограничениях ресурсов на разработку любое требование может внезапно стать лимитирующим, поэтому для небольшого приложения соло-разработчика скорее важна поддержка - в случае выявления проблем в функционале, крашей, проблем с производительностью, кривого интерфейса или внезапного прекращения работы библиотеки все можно исправить лишь в том случае, если логика работы понимаема, находится в пределах когнитивных ограничений, архитектура позволяет вносить изменения в отсутствие тестов, времени и т.п.</p>
<p>Также напрашивается аналогия к производительности в высоконагруженных приложениях, в которых проводится агрессивная денормализация и прочие хаки. Без соответствия нагрузкам бессмысленна красота архитектуры, гибкость, защищенность и т.п. При этом нагрузка даже может и не относиться к функциональным требованиям. С другой стороны, такая лимитированность относительна и в игру вступает закон Митчерлиха: даже выдерживающее нагрузки приложение может иметь фундаментальные ошибки в юзабилити и в логике работы. Если допустить, что в разные моменты времени разные факторы становятся лимитирующими за счет своего сильного отклонения требований, то практическое применение закона сильно усложняется и мало чем отличается от смысла существующего термина bottleneck. С другой стороны, может играть роль само ограничение последующей адаптации лимитирующим фактором. Ошибки и кривое юзабилити - это проблемы все же работающей системы, а лимитирующий фактор делает приложение неработоспособным.</p>
<p>Также интересен закон незаменимости фундаментальных факторов Вильямса - фундаментальные факторы не могут быть заменены другими факторами, фактор может усиливать или ослаблять действия другого фактора но не один фактор не может заменить действие другого. Грубым примером быть интерфейс, где юзабилити может попытаться заменить функциональные требования, не приводя к хорошему результату.</p>
<p>Аналогии достаточно примитивны, поскольку в самой экологии эти законы относятся к разным факторам, толерантности к физиологическим, лимитирования - к ресурсным и прочие нюансы, поэтому полная аналогия невозможна.</p>
<p>На еще более высоком уровне может быть интересным эволюционные стратегии для разных этапов жизни приложения по грубой аналогии с R / K‑отбором - для первых этапов жизни приложения рождается много крупных классов с широкой специализацией для изучение багов либ и проблем их логики, затем они умирают и начинают замещаться большим количеством мелких с узкой специализацией. Хотя это можно отнести и к процессам, происходящим в биоценозе, а переход озера в болото сравнить с легаси-кодом.</p>
<p>Подведу небольшие итоги:</p>
<ul>
<li>В приложении трудно выделить четкую структуру из-за конфликта между собой разных терминов из UML, GRASP, SOLID и т.п.</li>
<li>Структурными и количественными характеристиками классов приложения нужно управлять для поиска компромиссов. Характеристики, вероятно, будут частично подчиняться законам эволюции или адаптации.</li>
<li>Вероятно, наиболее полезным был бы закон лимитирующего фактора из-за своей высокой критичности.</li>
<li>Адаптация интересна связью с требованиями, которые могут как улучшить систему, так и уничтожить её.</li>
<li>В случае фундаментальных принципов усматривается частичная аналогия с живой системой. Но множество интересных вопросов, например, о точке бифуркации и влиянии факторов на изменение системы достаточно сложны и их рассмотрение требует специальных знаний.</li>
</ul>
<p>Нельзя сказать, что такая биологическая аналогия чем-то полезна на практике из-за высокой специфичности разработки и привязки к инструментам, но однозначно достаточно интересна и является хорошей тренировкой в использовании грубого, но полезного метода исследования по аналогии о котором, конечно же, не стоит забывать.</p>
</div>
    </div>
</article>
<div class='navigation-pages btn-toolbar justify-content-center mb-2' role='navigation'>
    
    <a class='navigation-pages-link btn mb-2 mx-0 mx-sm-1'
       href='/pages/interface-separation.html' role='button' rel="prev"> <span
            class='navigation-pages-link-icon mdi mdi-chevron-left'></span> Особенности выделения интерфейсов</a>
    
    <a class='navigation-pages-link btn mb-2 mx-0 mx-sm-1' href='/index.html'
       role='button' rel="first">
        <span class='navigation-pages-link-icon mdi mdi-home'></span> Главная</a>

    
    <a class='navigation-pages-link btn mb-2 mx-0 mx-sm-1'
       href='/pages/protected-variations.html' role='button' rel="next">Вспомним о Protected Variations <span
            class='navigation-pages-link-icon mdi mdi-chevron-right'></span></a>
    
</div>
        </div>
        <div class='col-lg-3 sidebar-right'>
            <div class='section' id='section-sidebar-right'>
    <div class='card sidebar-container post-labels'>
        <div class='card-header sidebar-container-header post-labels-header'>
            <span class='post-labels-header-icon mdi mdi-tag-outline'></span>
            Метки <span class='text-clarification'>(и кол-во статей)</span>
        </div>
        <div class='sidebar-container-content post-labels-content'>
            <div class='list-group list-group-flush'>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/dart.html'>Dart<span class='badge' style='min-width:40px;'>2</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/dlang.html'>Dlang<span class='badge' style='min-width:40px;'>3</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/groovy.html'>Groovy<span class='badge' style='min-width:40px;'>5</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/javafx.html'>JavaFX<span class='badge' style='min-width:40px;'>6</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/arhitektura_po.html'>Архитектура ПО<span class='badge' style='min-width:40px;'>10</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/metodologija.html'>Методология<span class='badge' style='min-width:40px;'>2</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/raznoe.html'>Разное<span class='badge' style='min-width:40px;'>1</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/ekonomika.html'>Экономика<span class='badge' style='min-width:40px;'>3</span></a>
                
                <a class='list-group-item list-group-item-action d-flex justify-content-between align-items-center ' href='/tags/elektronika.html'>Электроника<span class='badge' style='min-width:40px;'>1</span></a>
                
            </div>
        </div>
    </div>
    <div class='card sidebar-container in-progress-articles'>
       <div class='card-header sidebar-container-header in-progress-articles-header'>
           <span class='mdi mdi-calendar-clock'></span>
            В процессе написания
       </div>
       <div class='sidebar-container-content post-labels-content in-progress-articles-content'>
               <ul class='list-group'>
				   <li class='list-group-item align-items-center text-muted'>Нет статей</li>
               </ul>
       </div>
    </div>
    <div class='card mb-3 sidebar-container links-contacts'>
        <div class='card-header sidebar-container-header links-contacts-header'>
            <span class='mdi mdi-open-in-new'></span>
            Девлоги текущих проектов
        </div>
        <div class="list-group sidebar-container-content">
			<a class='link-contact list-group-item list-group-item-action' rel="me" href='https://www.youtube.com/@initkfs'>Youtube (готовится)</a>
		</div>
    </div>
    <div class='page-up-wrapper'>
        <button class='btn d-none d-lg-block' id='page-up-trigger' type='button'><span
                class='mdi mdi-arrow-up'></span></button>
    </div>
</div>
        </div>
    </div>
</div>
<footer class='page-footer'>
    <div class='container'>
        <div class='row'>
            <div class='col-md-12'>
                <div class='card'>
    <div class='card-body'>
        <p class="text-danger">Сайт в процессе тестирования.</p>
        <small><span class='blog-info-footer'>Всего статей: 24. Блог - исследовательский, статьи отражают лишь субъективное мнение автора.</span> <span>&#169; <span id='copyright-date'></span>, Константин Фирсов.</span></small>
        
        <div class='blog-additional-links d-flex justify-content-center'>
        <div class='blog-rss'><a class='blog-rss-item blog-icon-clickable'
                                 href='/rss-all.xml'><span
                class='mdi mdi-rss-box blog-icon-rss'></span></a></div>
        </div>
        <div class='text-danger' id='js-fail-block'>
            <noscript>
                <small>JavaScript отключен в браузере, функционал сайта ограничен.</small>
            </noscript>
        </div>
    </div>
</div>
<script type='application/ld+json'>
    {
        "@context": "http://www.schema.org",
        "@type": "person",
        "name": "initkfs",
        "jobTitle": "",
        "url": "/index.html"
    }
</script>
            </div>
        </div>
    </div>
</footer>
<div class='mobile-up-wrapper text-center'>
    <button class='btn d-lg-none' id='mobile-page-up-trigger' type='button'><span
            class='mdi mdi-arrow-up'></span> Вверх
    </button>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" 
integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script crossorigin='anonymous' integrity='sha512-TPh2Oxlg1zp+kz3nFA0C5vVC6leG/6mm1z9+mA81MI5eaUVqasPLO8Cuk4gMF4gUfP5etR73rgU/8PNMsSesoQ=='
        src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js'></script>

<script crossorigin='anonymous' integrity='sha512-WW8/jxkELe2CAiE4LvQfwm1rajOS8PHasCCx+knHG0gBHt8EXxS6T6tJRTGuDQVnluuAvMxWF4j8SNFDKceLFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.min.js'></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.2/timeago.full.min.js" integrity="sha512-wb3lqal2VtYhmlPAr232VP+Zus676CFAEYdywxIUSxG6F/X9WhN6SpREkWUdwBvMpd6gCKuKTGHhdum6m1wOvQ==" crossorigin="anonymous"></script>

<script crossorigin='anonymous' integrity='sha512-9khQRAUBYEJDCDVP2yw3LRUQvjJ0Pjx0EShmaQjcHa6AXiOv6qHQu9lCAIR8O+/D8FtaCoJ2c0Tf9Xo7hYH01Q=='
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>

<script crossorigin='anonymous' integrity='sha512-SkmBfuA2hqjzEVpmnMt/LINrjop3GKWqsuLSSB3e7iBmYK7JuWw4ldmmxwD9mdm2IRTTi0OxSAfEGvgEi0i2Kw=='
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js" ></script>

<script>
var problemScripts = [];
if (typeof jQuery === 'undefined') {
    problemScripts.push("jquery");
}

   if (typeof Prism === 'undefined'){
    problemScripts.push("prism.js");
   }
   
if (typeof Popper === 'undefined') {
    problemScripts.push("popper.js");
}

if (typeof timeago === 'undefined') {
    problemScripts.push("timeago.js");
}

if (typeof window.bootstrap === 'undefined') {
    problemScripts.push("bootstrap.js");
}

if (problemScripts.length > 0) {
    var message = "Ошибка загрузки JavaScript: " +
        problemScripts.join(",") +
        "." +
        " Возможные причины: блокировщик рекламы, проблемы с сетью, устаревший браузер. Может не работать дополнительный функционал.";

    var failInfoBlock = document.createElement("small");
    failInfoBlock.innerHTML = message;

    var mainFailBlock = document.getElementById("js-fail-block");
    if (!mainFailBlock) {
        console.error(message);
    } else {
        mainFailBlock.appendChild(failInfoBlock);
    }   
}
</script>
<script src="/assets/dev/js/main.js"></script>
</body>
</html>



